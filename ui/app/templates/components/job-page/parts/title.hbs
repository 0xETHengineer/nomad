<h1 class="title with-flex">
  <div data-test-job-name>
    {{or this.title this.job.name}}
    {{#if @job.meta.structured.pack}}
      <span data-test-pack-tag class="tag is-hollow">
        {{x-icon "box" class= "test"}}
        <span>Pack</span>
      </span>
    {{/if}}
    <span class="bumper-left tag {{this.job.statusClass}}" data-test-job-status>{{this.job.status}}</span>
    {{yield}}
  </div>
  <div>
    {{#if (not (eq this.job.status "dead"))}}
      <div class="two-step-button">
        <Exec::OpenButton @job={{this.job}} />
      </div>
      <TwoStepButton
        data-test-stop
        @alignRight={{true}}
        @idleText="Stop Job"
        @cancelText="Cancel"
        @confirmText="Yes, Stop Job"
        @confirmationMessage="Are you sure you want to stop this job?"
        @awaitingConfirmation={{this.stopJob.isRunning}}
        @onConfirm={{perform this.stopJob}} />
    {{else}}
      <TwoStepButton
        data-test-purge
        @alignRight={{true}}
        @idleText="Purge Job"
        @cancelText="Cancel"
        @confirmText="Yes, Purge Job"
        @confirmationMessage="Are you sure? You cannot undo this action."
        @awaitingConfirmation={{this.purgeJob.isRunning}}
        @onConfirm={{perform this.purgeJob}} />
      <TwoStepButton
        data-test-start
        @alignRight={{true}}
        @idleText="Start Job"
        @cancelText="Cancel"
        @confirmText="Yes, Start Job"
        @confirmationMessage="Are you sure you want to start this job?"
        @awaitingConfirmation={{this.startJob.isRunning}}
        @onConfirm={{perform this.startJob}} />
    {{/if}}
  </div>
</h1>
{{#if this.job.actions.length}}
  <div class="job-actions">
    <h2>Actions:</h2>
    <div>
    {{#each this.job.actions as |job-action|}}
    <Hds::Button
      {{keyboard-shortcut 
        enumerated=true
        action=(action job-action.perform)
      }}
      @size="large"
      class={{if job-action.isRunning "is-running"}}
      @disabled={{job-action.isRunning}}
      {{on "click" (action job-action.perform)}}
      @text={{job-action.name}}
      @color={{job-action.type}}
    />
    {{!-- <button type="button"
      class="button is-small is-outlined is-{{job-action.name}}"
      {{on "click" (action job-action.perform)}}
      disabled={{job-action.isRunning}}
    >
      <span>{{job-action.name}}</span>
    </button> --}}
      {{!-- <TwoStepButton
        data-test-action={{action.name}}
        @alignRight={{true}}
        @idleText={{action.name}}
        @cancelText="Cancel"
        @confirmText="Yes, {{action.name}}"
        @confirmationMessage={{action.confirmationMessage}}
        @awaitingConfirmation={{action.isRunning}}
        @onConfirm={{action.perform}} /> --}}
    {{/each}}
    </div>
    </div>
{{/if}}
